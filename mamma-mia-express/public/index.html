<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Mamma Mia!</title>
        <link rel="stylesheet" type="text/css" href="css/styles.css" />
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <script src="/js/builders.js" ></script>
        <script src="/js/helpers.js" ></script>
        <script src="/js/menuItem.js" ></script>
        <script src="/js/components/removeDishListener.js" ></script>
        <script src="/js/components/editDishListener.js" ></script>
        <script src="/js/components/addDish.js"></script>
        <script src="/js/components/addDishListener.js" ></script>
        <script>
            $(document).ready(function (){
                $.ajax({
                    url: '/get_dishes',
                    complete: function(data) {
                        var array = data.responseJSON.message;
                        var groupByCategories = groupBy(array, 'type');
                        console.log(groupByCategories);
                        var count = 0;
                        $.each(groupByCategories, function() {
                            coll = addClass(div(addClass(h1(text(this[0].type)),"title")), "collection");
                            $.each(this, function(){
                                coll.append(createMenuItem(this));
                            });
                            if (count % 2 == 0){
                                $("#leftColumn").append(coll);
                            }
                            else{
                                $("#rightColumn").append(coll);
                            }
                            count++;
                        });

                        $('.remove-dish').click(removeDish);
                        $('.add-dish').click(addDish);
                        $('.edit-dish').click(editDish);
                        $('.cancel-edit-dish').click(cancelEdition);
                        $('.apply-edit-dish').click(applyEdition);  
                    }
                });
            });
        </script>
    </head>
    <body>
        <section class="modal" id="modal">
            <div class="modal-container">
                <i class="fa fa-times close" id="close"></i>
                <h1 class="title">Ingreso</h1>
                <input type="text" placeholder="Usuario" class="user menu-item is-fullwidth">
                <input type="password" placeholder="ContraseÃ±a" class="password menu-item is-fullwidth">
                <div class="message-board"></div>
                <button class="login button is-fullwidth">Ingresar</button>
            </div>
        </section>
        <nav class="navbar">
            <div class="navbar-left"></div>
            <div class="navbar-right cart">
                <div class="navbar-item">
                    <i class="fa fa-sign-in" id="cart-icon"></i>
                    <span class="cart-items"></span>
                </div>
            </div>
        </nav>
        <section class="hero splash">
            <div class="hero-content">
                <div class="container">
                    <p class="hero-text-bold">Mamma mia!</p>
                    <p class="hero-text-light">Restaurant</p>
                </div>
            </div>
        </section>
        <div>
            <button class="edit button">Edit</button>
            <button class="addCategory button">Add Category</button>
            <button class="add-dish button" id="undefined">Add Dish</button>
            <button class="saveButton button">Save</button>
        </div>
        <div class="container" id="menu">
            <section class="columns">
                <div class="column is-6" id="leftColumn">
                </div>
                <div class="column is-6" id="rightColumn">
                </div>
            </section>
        </div>
        <footer class="footer">
            <div class="container">
                <div class="content is-centered">
                    <p>Aieta, Barbetta, Fusaro, Impaglione, Hagman</p>
                </div>
            </div>
        </footer>
    </body>
</html>

